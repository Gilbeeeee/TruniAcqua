<!DOCTYPE html>
<html>
<head>
    <title>Turno per l'acqua</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script>
         // Your web app's Firebase configuration
         const firebaseConfig = {
             apiKey: "AIzaSyA4JAkZlXs7WfjPzth7aMEyxFZaCJl8vEA",
             authDomain: "acqualatini.firebaseapp.com",
             projectId: "acqualatini",
             storageBucket: "acqualatini.appspot.com",
             messagingSenderId: "608724252934",
             appId: "1:608724252934:web:f3605a412fc940e7268687",
             databaseURL: "https://acqualatini-default-rtdb.firebaseio.com/"
         };

        // Initialize Firebase
                firebase.initializeApp(firebaseConfig);

                // Authentication
                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        loadData();
                    } else {
                        // User is signed out
                        document.getElementById("auth").style.display = "block";
                    }
                });

                function login() {
                    const email = document.getElementById("email").value;
                    const password = document.getElementById("password").value;
                    firebase.auth().signInWithEmailAndPassword(email, password)
                        .then((userCredential) => {
                            // Signed in
                            var user = userCredential.user;
                            loadData();
                        })
                        .catch((error) => {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            alert(errorMessage);
                        });
                }

                function logout() {
                    firebase.auth().signOut().then(() => {
                        document.getElementById("auth").style.display = "block";
                    }).catch((error) => {
                        console.error(error);
                    });
                }
            </script>
        </head>
        <body>
            <div id="auth" style="display:none;">
                <h2>Login</h2>
                <input type="email" id="email" placeholder="Email"><br>
                <input type="password" id="password" placeholder="Password"><br>
                <button onclick="login()">Login</button>
            </div>
            
    <h1>A chi tocca prendere l'acqua oggi?</h1>
    <p>(Solo se sai la password corretta puoi modificare i dati)</p>
    
    <div class="marquee-container">
        <div class="marquee">
            <h3>Turni di oggi...</h3>
            <p id="turns-text">Chi la deve portare su: nome1 &nbsp;&nbsp; | &nbsp;&nbsp;  Chi la deve pulire: nome2 &nbsp;&nbsp; |&nbsp;&nbsp; Chi la deve portare giù: nome3</p>
        </div>
    </div>

    <h2>REGISTRO:</h2>
    <table id="activityTable">
        <tr>
            <th>Nome</th>
            <th>Portata su</th>
            <th>Pulita</th>
            <th>Portata giù</th>
        </tr>
        <tr>
            <td>Gilberto</td>
            <td id="gilberto-water">0</td>
            <td id="gilberto-cleaned">0</td>
            <td id="gilberto-brought">0</td>
        </tr>
        <tr>
            <td>Adriano</td>
            <td id="adriano-water">0</td>
            <td id="adriano-cleaned">0</td>
            <td id="adriano-brought">0</td>
        </tr>
        <tr>
            <td>Gregorio</td>
            <td id="gregorio-water">0</td>
            <td id="gregorio-cleaned">0</td>
            <td id="gregorio-brought">0</td>
        </tr>
    </table>

    <h2>BOTTONI:</h2>
    <div class="button-container" id="button-container">
        <div class="button-group">
            <button onclick="increment('gilberto', 'water')" disabled>Gilberto: Portata su +</button>
            <button onclick="decrement('gilberto', 'water')" disabled>Gilberto: Portata su -</button>
            <button onclick="increment('gilberto', 'cleaned')" disabled>Gilberto: Pulita +</button>
            <button onclick="decrement('gilberto', 'cleaned')" disabled>Gilberto: Pulita -</button>
            <button onclick="increment('gilberto', 'brought')" disabled>Gilberto: Portata giù +</button>
            <button onclick="decrement('gilberto', 'brought')" disabled>Gilberto: Portata giù -</button>
        </div>
        <div class="button-group">
            <button onclick="increment('adriano', 'water')" disabled>Adriano: Portata su +</button>
            <button onclick="decrement('adriano', 'water')" disabled>Adriano: Portata su -</button>
            <button onclick="increment('adriano', 'cleaned')" disabled>Adriano: Pulita +</button>
            <button onclick="decrement('adriano', 'cleaned')" disabled>Adriano: Pulita -</button>
            <button onclick="increment('adriano', 'brought')" disabled>Adriano: Portata giù +</button>
            <button onclick="decrement('adriano', 'brought')" disabled>Adriano: Portata giù -</button>
        </div>
        <div class="button-group">
            <button onclick="increment('gregorio', 'water')" disabled>Gregorio: Portata su +</button>
            <button onclick="decrement('gregorio', 'water')" disabled>Gregorio: Portata su -</button>
            <button onclick="increment('gregorio', 'cleaned')" disabled>Gregorio: Pulita +</button>
            <button onclick="decrement('gregorio', 'cleaned')" disabled>Gregorio: Pulita -</button>
            <button onclick="increment('gregorio', 'brought')" disabled>Gregorio: Portata giù +</button>
            <button onclick="decrement('gregorio', 'brought')" disabled>Gregorio: Portata giù -</button>
        </div>
    </div>

    <div class="text-box-container">
        <div>
            <input type="text" id="name1" class="text-box" placeholder="nome1" disabled>
            <button id="update-name1" onclick="updateName('name1')" disabled>Invia</button>
        </div>
        <div>
            <input type="text" id="name2" class="text-box" placeholder="nome2" disabled>
            <button id="update-name2" onclick="updateName('name2')" disabled>Invia</button>
        </div>
        <div>
            <input type="text" id="name3" class="text-box" placeholder="nome3" disabled>
            <button id="update-name3" onclick="updateName('name3')" disabled>Invia</button>
        </div>
    </div>

    <div id="password-popup" class="password-popup">
        <div class="password-content">
            <label for="password">Inserisci la password:</label>
            <input type="password" id="password" name="password">
            <button onclick="checkPassword()">Invia</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
